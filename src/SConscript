Import('root_env SOURCE_FILES')

SOURCE_FILES.append(File('SConscript'))

env = root_env.Clone()

env.Append(CPPPATH = ["#/include", "$libhwm_CPPPATH"],
           LIBPATH = [".", "$libhwm_LIBPATH"])

libpush_files = map(File, \
    [
     "callback.c",
     "parser.c",
     "trash.c",
     "protobuf/field.c",
     "protobuf/varint32.c",
     "protobuf/varint64.c",
    ])

SOURCE_FILES.extend(libpush_files)

libpush = env.SharedLibrary("push", libpush_files,
                            LIBS=["$libhwm_LIB"])
env.Alias("install", env.Install("$LIBDIR", libpush))
Default(libpush)

Export('libpush')
